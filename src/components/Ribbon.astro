---
interface Props {
    text: string;
    class: string;
    repeats?: number;
}

const { text, repeats = 7, class: classList } = Astro.props;

// TODO change animation speed with props?
// TODO remove animation for prefer no motion
// TODO remove brackets and return statement - only () requred
---

<div class="flex overflow-x-hidden" class:list={classList}>
    <div class="relative">
        <div class="js-marquee whitespace-nowrap">
            {
                Array(repeats)
                    .fill(0)
                    .map(() => {
                        return <span class="ml-2">{text}</span>;
                    })
            }
        </div>
        <div class="absolute top-0 js-marquee2 whitespace-nowrap">
            {
                Array(repeats)
                    .fill(0)
                    .map(() => {
                        return <span class="ml-2">{text}</span>;
                    })
            }
        </div>
    </div>
</div>

<script>
    import { animate } from "motion";

    animate(
        ".js-marquee",
        { transform: ["translateX(0%)", "translateX(-100%)"] },
        { duration: 200, repeat: Infinity, easing: "linear" }
    );
    animate(
        ".js-marquee2",
        { transform: ["translateX(100%)", "translateX(0%)"] },
        { duration: 200, repeat: Infinity, easing: "linear" }
    );
</script>
