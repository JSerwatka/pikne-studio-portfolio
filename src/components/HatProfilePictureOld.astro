---
import { Image } from "astro:assets";
import profilePicture from "../assets/about-me-profile.png?url";
import spaceSuit from "../assets/hats/space-suit.png";
import babushka from "../assets/hats/babushka.png";
import beanie from "../assets/hats/beanie.png";
import beret from "../assets/hats/beret.png";
import bucket from "../assets/hats/bucket.png";
import cap from "../assets/hats/cap.png";
import catWoman from "../assets/hats/cat-woman.png";
import floweCrown from "../assets/hats/flowe-crown.png";
import pikachu from "../assets/hats/pikachu.png";
import pinkHat from "../assets/hats/pink-hat.png";

const hats = [
    {
        name: "space suit",
        src: spaceSuit
    },
    {
        name: "babushka",
        src: babushka
    },
    {
        name: "beanie",
        src: beanie
    },
    {
        name: "beret",
        src: beret
    },
    {
        name: "bucket hat",
        src: bucket
    },
    {
        name: "cap",
        src: cap
    },
    {
        name: "cat-woman mask",
        src: catWoman
    },
    {
        name: "crown from flowers",
        src: floweCrown
    },
    {
        name: "pikachu hat",
        src: pikachu
    },
    {
        name: "pink hat with a ribbon",
        src: pinkHat
    }
];

const hatsJSON = JSON.stringify(hats);
---

<div class="js-hats-data" class="relative" data-hats={hatsJSON}>
    <Image
        src={profilePicture}
        alt="profile picture of me"
        width="660"
        height="700"
        loading="eager"
        class:list={[
            "aspect-square object-cover object-center w-full",
            "md:fixed md:bottom-0 md:right-0 md:-z-10 md:w-1/2 md:max-w-[660px]"
        ]}
    />
    <button class="next">-></button>
    <Image class="css-hat" src={hats[0].src} alt={hats[0].name} />
</div>

<style>
    .css-hat {
        position: absolute;
        left: 0;
    }
</style>

<script>
    let currentIndex = 0;
    const hatsData = document.querySelector(".js-hats-data") as HTMLElement;
    const changeHatButton = document.querySelector(".next") as HTMLButtonElement;
    const hatImage = document.querySelector(".css-hat") as HTMLImageElement;

    const hats = JSON.parse(hatsData.dataset.hats as any);

    console.log(hats);

    changeHatButton.addEventListener("click", () => {
        currentIndex = (currentIndex + 1) % hats.length;
        hatImage.src = hats[currentIndex].src;
        hatImage.alt = hats[currentIndex].name;
    });
</script>

<!-- <Image
        src={profilePicture}
        alt="profile picture of me"
        width="660"
        height="700"
        loading="eager"
        class:list={[
            "aspect-square object-cover object-center w-full",
            "md:fixed md:bottom-0 md:right-0 md:-z-10 md:w-1/2 md:max-w-[660px]"
        ]}
    /> -->
