---
import aleksandraThinking from "@assets/index/thinking.png";
import aleksandraConfetti from "@assets/index/confetti.png";
import smallArrow from "@assets/small-arrow.svg";
import { Image } from "astro:assets";
---

<div
    class:list={[
        "flex min-h-screen items-center overflow-x-hidden bg-blue-100",
        "py-20 ",
        "px-6",
        "md:px-14",
        "xl:overflow-visible"
    ]}
>
    <div class:list={["relative"]}>
        <div class:list={["relative z-20", "xl:ml-auto xl:max-w-[50%]"]}>
            <div class="text-paragraph__normal">What do i do</div>
            <div class="text-header__2 my-10">
                <div class="mb-10">
                    I craft branding, art direction and illustration based on psychological knowledge.
                </div>
                <div>
                    Through visual storytelling and empathy-driven design, I help your mission reach those who care
                    about it.
                </div>
            </div>
            <a role="button" data-contact-button class="btn-primary" href="#contact">
                Contact me
                <!-- TODO shouldn't I use ArrowIcon component? -->
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16px"
                    height="17px"
                    viewBox="0 0 16 17"
                    class="ml-2 inline-block fill-ruby-red"
                >
                    <path
                        d="M7.29289 16.7071C7.68342 17.0976 8.31658 17.0976 8.70711 16.7071L15.0711 10.3431C15.4616 9.95262 15.4616 9.31946 15.0711 8.92893C14.6805 8.53841 14.0474 8.53841 13.6569 8.92893L8 14.5858L2.34315 8.92893C1.95262 8.53841 1.31946 8.53841 0.928932 8.92893C0.538407 9.31946 0.538407 9.95262 0.928932 10.3431L7.29289 16.7071ZM7 -4.37114e-08L7 16L9 16L9 4.37114e-08L7 -4.37114e-08Z"
                    ></path>
                </svg>
            </a>
        </div>
        <div class:list={["mt-[65vw] md:mt-[550px] md:flex md:justify-end  [&>*]:transition-opacity", "xl:mt-0"]}>
            <Image
                src={aleksandraThinking}
                alt="me squatting and thinking, red doodles around me"
                class:list={[
                    "absolute bottom-0 z-10",
                    "scale-x-[-1]",
                    "md:max-w-[800px]",
                    "xl:left-0 xl:w-[60%] xl:max-w-[1000px] xl:scale-x-100 xl:object-contain"
                ]}
                loading="eager"
                data-default-image
            />

            <Image
                src={aleksandraConfetti}
                alt="me exited with arms raised and a big smile, throwing confetti"
                class:list={[
                    "opacity-0",
                    "absolute bottom-0 z-10",
                    "scale-x-[-1]",
                    "md:max-w-[800px]",
                    "xl:left-0 xl:w-[60%] xl:max-w-[1000px] xl:scale-x-100 xl:object-contain"
                ]}
                loading="lazy"
                data-hidden-image
            />
        </div>
    </div>
</div>

<script>
    const defaultImage = document.querySelector("[data-default-image]") as HTMLImageElement;
    const hiddenImage = document.querySelector("[data-hidden-image]") as HTMLImageElement;
    const contactButton = document.querySelector("[data-contact-button]") as HTMLAnchorElement;

    // show animation and then scroll to the href
    contactButton.addEventListener("click", (e: MouseEvent) => {
        e.preventDefault();

        hiddenImage.classList.remove("opacity-0");
        defaultImage.classList.add("opacity-0");

        const href = contactButton.getAttribute("href") ?? "#contact";

        setTimeout(function () {
            window.location.href = href;
        }, 500);

        setTimeout(function () {
            hiddenImage.classList.add("opacity-0");
            defaultImage.classList.remove("opacity-0");
        }, 700);
    });
</script>
