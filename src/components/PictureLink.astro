---
import { Image } from "astro:assets";
import nextArrowIcon from "@assets/arrow.svg";
---

<div class="relative">
    <!-- <div class="font-metropolis text-xl uppercase -mb-5">Next up</div>
    <div class="flex gap-3">
        <Image src={nextArrowIcon} alt="arrow icon" width={50} />

        <div class="text-header__1 text-white">MIR</div>
        <span class="hover-container">
            <span class="link-text" aria-hidden="true">MIR</span>
            <span class="image-container">
                <span class="image-inner">
                    <img class="link-image" src="https://assets.codepen.io/1159990/tokyo-tower.jpg" alt="Tokyo Tower" />
                </span>
            </span>
        </span>
    </div> -->
    <div class="relative">
        <div class="text-header__1">
            text test
        </div>

            <div class="text-header__1 text-lilac css-link-text absolute top-0 left-0 ">
                text test
            </div>
    </div>

    <div>
        <img class="fixed  w-[150px] h-[150px] top-0 left-0 object-cover object-center rounded-full js-circle-img pointer-events-none" src="https://assets.codepen.io/1159990/tokyo-tower.jpg" alt="Tokyo Tower" />
    </div>
</div>

<style>
    /* .text-header__1:hover > .link-text {
        opacity: 1;
    }
    .text-header__1:hover > .image-container {
        opacity: 1;
    } */


    .css-link-text {
        z-index: 10;
        pointer-events: none;
        clip-path: circle(75px at var(--x) var(--y));
        /* overflow: hidden; */
        /* opacity: 1; */
        /* transition: opacity 250ms ease; */
    }

    /* .image-container {
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0;
        width: 150px;
        height: 150px;
        opacity: 1;
        transition: opacity 250ms ease;
    }

    .image-inner {
        position: absolute;
        top: -75px;
        left: -75px;
        width: 150px;
        height: 150px;
    }

    .link-image {
        display: block;
        max-width: 100%;
        width: 150px;
        height: 150px;
        object-fit: cover;
        object-position: center;
        border-radius: 50%;
        filter: brightness(0.9);
    } */
</style>

<script>
    const linkText = document.querySelector(".css-link-text") as HTMLElement;
    const linkImage = document.querySelector(".js-circle-img") as HTMLElement;
    const linkTextRect = linkText.getBoundingClientRect(); 


    function showImgContent(e) {
        const mouseX = e.clientX;
        const mouseY = e.clientY;
        linkImage.style.left = mouseX - 75 + 'px';
        linkImage.style.top = mouseY - 75 + 'px';        
        linkText.style.setProperty("--x", mouseX  + "px");
        linkText.style.setProperty("--y", mouseY - linkTextRect.top  + "px");
    }

    // linkImage.style.left = 0 + 'px';
    //     linkImage.style.top = 0 + 'px'; 

    document.addEventListener("mousemove", showImgContent);
</script>
