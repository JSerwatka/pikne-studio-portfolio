---
import Navbar from "@components/Navbar/Navbar.astro";
import LayoutBase from "./LayoutBase.astro";
import Footer from "@components/Footer.astro";

interface Props {
    title: string;
}

const { title } = Astro.props;
// TODO: use Picture for bg https://docs.astro.build/pl/guides/images/#picture-
// TODO: make sure position of background image is correct
// TODO: change max width
// TODO: for small screens scroll space between hero section disapearing and gallery showing up is too small
---

<LayoutBase title={title}>
    <div class="after:block after:h-[calc(100vh+20px)] after:w-full after:content-['']">
        <header class="absolute top-0 z-10 h-[calc(100vh+20px)] w-full">
            <Navbar class="absolute z-20 w-full bg-white/10 backdrop-blur-md" />
            <div
                class:list={[
                    "absolute z-10 h-full w-full",
                    "children:h-full children:w-full children:rounded-b-3xl children:object-cover children:object-center"
                ]}
            >
                <slot name="hero-background" />
            </div>
        </header>
        <main class="sticky top-0 mx-auto max-w-[1000px]">
            <div class="flex min-h-screen items-center">
                <div class:list={["my-8 flex h-min flex-col gap-12 text-dark-chocolate", "lg:flex-row lg:gap-7 "]}>
                    <div class:list={["basis-full", "lg:basis-1/3"]}>
                        <div class:list={["mb-4 pt-6 font-metropolis text-2xl uppercase", "lg:mt-6 lg:pt-0"]}>
                            SERVICES
                        </div>
                        <ul class:list={["text-paragraph__normal services-grid", "children:whitespace-nowrap"]}>
                            <slot name="services-list" />
                        </ul>
                    </div>
                    <div class:list={["basis-full", "lg:basis-2/3"]}>
                        <div class="text-header__2">
                            <slot name="project-title" />
                        </div>
                        <div class="text-paragraph__normal children-p-not-last:mb-8">
                            <slot name="project-description" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex min-h-screen place-items-center">
                <div
                    class:list={[
                        "mx-auto grid grid-cols-6 gap-3 children:w-full children:rounded-3xl children:object-cover",
                        "auto-rows-fr children:aspect-square  children:max-w-[580px]",
                        "lg:auto-rows-[350px] lg:children:aspect-auto lg:children:h-0 lg:children:min-h-full lg:children:max-w-none"
                    ]}
                >
                    <slot name="images" />
                </div>
            </div>
            <slot name="other" />
        </main>
    </div>
    <Footer />
</LayoutBase>

<style>
    .services-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, calc(50% - 0.5rem)));
        gap: 1rem;
    }
</style>
